<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filipino Communication Tool</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-slate-900">
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // This is the main component for your application
        const App = () => {
            const [inputMessage, setInputMessage] = useState('');
            const [adaptedMessages, setAdaptedMessages] = useState([]);

            // 2. FIXED: This 'effect' runs after the app draws, ensuring icons are properly created.
            useEffect(() => {
                lucide.createIcons();
            }, [adaptedMessages]); // Re-run this logic whenever new messages are displayed

            // This function contains the logic to transform the user's message
            const adaptMessage = (message) => {
                if (!message.trim()) return [];
                
                // Helper functions to convert the message into different styles
                const convertToDirectRespectful = (msg) => {
                    let adapted = msg.replace(/can you please|would you mind|could you/gi, 'Please');
                    if (!adapted.toLowerCase().includes('po') && !adapted.toLowerCase().includes('tatay')) adapted = 'Tatay, ' + adapted;
                    if (!adapted.toLowerCase().includes('salamat')) adapted += ' Salamat po.';
                    return adapted;
                };
                const convertToScheduleFormat = (msg) => {
                    let adapted = msg.replace(/later/gi, 'after 7:00 PM').replace(/in the evening/gi, 'from 8:00-9:00 PM').replace(/when I'm done/gi, 'after I finish (30 minutes)');
                    return adapted.split('.').filter(l => l.trim()).map((l, i) => `${i + 1}. ${l.trim()}`).join('\n');
                };
                const convertToSimpleCommands = (msg) => {
                    const sentences = msg.split(/[,;]|and(?!\s+the)/);
                    return sentences.map(s => s.trim().replace(/can you please|would you mind|could you/gi, '').replace(/^\s*to\s+/gi, '')).map(c => c.charAt(0).toUpperCase() + c.slice(1)).filter(c => c.length > 3).join('.\n') + '.';
                };
                const convertToWhiteboardFormat = (msg) => {
                    return msg.toUpperCase().replace(/CAN YOU PLEASE|WOULD YOU MIND|COULD YOU/gi, 'â†’').split('.').map(s => s.trim() ? `ðŸ“‹ ${s.trim()}` : '').filter(s => s).join('\n\n');
                };

                // An array of all possible adaptations
                return [
                    { type: 'Direct & Respectful', icon: 'message-square', color: 'border-purple-400', message: convertToDirectRespectful(message), context: 'Best for: Daily requests, routine changes', timing: 'Good timing: After meals, calm moments' },
                    { type: 'Visual Schedule Format', icon: 'clock', color: 'border-sky-400', message: convertToScheduleFormat(message), context: 'Best for: Time-based requests, planning', timing: 'Good timing: Morning planning, evening prep' },
                    { type: 'Simple Commands', icon: 'eye', color: 'border-green-400', message: convertToSimpleCommands(message), context: 'Best for: Immediate actions, safety', timing: 'Good timing: When attention is focused' },
                    { type: 'Whiteboard Format', icon: 'file-text', color: 'border-orange-400', message: convertToWhiteboardFormat(message), context: 'Best for: Complex instructions, reminders', timing: 'Good timing: Leave up for reference' }
                ];
            };
            
            // This function is called when the user clicks the "Adapt" button
            const handleSubmit = () => {
                setAdaptedMessages(adaptMessage(inputMessage));
            };

            const culturalTips = ["Use 'Tatay' to show respect and get attention", "Add 'po' for politeness in requests", "End with 'Salamat po' to show gratitude", "Be specific about times rather than vague", "Break complex requests into simple steps", "Use visual cues when possible", "Avoid American idioms and indirect language"];

            // 3. IMPROVED: This is modern JSX, which is much easier to read than React.createElement()
            return (
                <div className="min-h-screen text-white font-sans p-4 sm:p-8 flex justify-center items-start">
                    <div className="w-full max-w-5xl mx-auto">
                        <div className="mb-8 text-center">
                            <h1 className="text-3xl sm:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 via-pink-500 to-red-500 mb-2">Filipino Communication Tool</h1>
                            <p className="text-slate-400">Adapt your messages for clear and respectful communication.</p>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div className="lg:col-span-2 space-y-6">
                                <div className="bg-slate-800 p-6 rounded-xl shadow-2xl">
                                    <label htmlFor="message-input" className="block text-lg font-semibold text-slate-300 mb-2">Your Original Message:</label>
                                    <textarea id="message-input" value={inputMessage} onChange={(e) => setInputMessage(e.target.value)} placeholder="e.g., Can you please wait to clean the kitchen until I am done preparing my meals for the week?" className="w-full p-3 bg-slate-700 border border-slate-600 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none text-slate-100 placeholder-slate-400" rows="4"></textarea>
                                    
                                    <div className="flex items-center gap-4 mt-4">
                                        <button onClick={handleSubmit} className="px-8 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold rounded-lg hover:from-purple-600 hover:to-pink-600 shadow-md hover:shadow-lg transition-all duration-150 ease-in-out transform hover:scale-105">Adapt Message</button>
                                    </div>
                                </div>

                                {adaptedMessages.length > 0 && (
                                    <div className="space-y-4">
                                        <h2 className="text-2xl font-semibold text-slate-200">Adapted Messages:</h2>
                                        {adaptedMessages.map((adaptation, index) => (
                                            <div key={index} className={`bg-slate-800 p-4 rounded-xl border-l-4 ${adaptation.color}`}>
                                                <div className="flex items-center gap-3 mb-3">
                                                    <i data-lucide={adaptation.icon} className="w-5 h-5"></i>
                                                    <h3 className="font-semibold text-slate-100 text-lg">{adaptation.type}</h3>
                                                </div>
                                                <div className="bg-slate-900 p-3 rounded mb-3">
                                                    <pre className="whitespace-pre-wrap font-mono text-sm text-slate-200">{adaptation.message}</pre>
                                                </div>
                                                <div className="text-sm text-slate-400">
                                                    <p><strong className="font-medium text-slate-300">Best for:</strong> {adaptation.context}</p>
                                                    <p><strong className="font-medium text-slate-300">Timing:</strong> {adaptation.timing}</p>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                            
                            <div className="space-y-6">
                                <div className="bg-slate-800 p-4 rounded-xl border-l-4 border-yellow-400">
                                    <div className="flex items-center gap-3 mb-3">
                                        <i data-lucide="lightbulb" className="w-5 h-5 text-yellow-400"></i>
                                        <h3 className="font-semibold text-yellow-300">Cultural Communication Tips</h3>
                                    </div>
                                    <ul className="space-y-2 text-sm text-slate-300 list-disc list-inside">
                                        {culturalTips.map((tip, index) => <li key={index}>{tip}</li>)}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // This is where React connects to your HTML
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);

    </script>
</body>
</html>
